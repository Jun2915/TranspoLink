@model IEnumerable<Trip>
@{
    ViewBag.Title += " | Trip Operations";
}

@section head {
    <link rel="stylesheet" href="/css/RNT.css" asp-append-version="true" />
    <script src="/js/RNT.js" defer></script>
}

<div class="rnt-page-container">
    <div class="rnt-content-wrapper">

        <div class="rnt-card">
            <div class="rnt-header">
                <div class="rnt-title">
                    <h2>🎫 Daily Trips</h2>
                    <p>Monitor scheduled trips and live operational status.</p>
                </div>
                <a href="/RouteNTrip/CreateTrip" class="btn-rnt btn-rnt-success">+ Schedule New Trip</a>
            </div>
        </div>

        <div class="rnt-tabs">
            <a href="?status=" class="rnt-tab @(ViewBag.SelectedStatus == "" ? "active" : "")">All Trips</a>
            <a href="?status=Scheduled" class="rnt-tab @(ViewBag.SelectedStatus == "Scheduled" ? "active" : "")">📅 Scheduled</a>
            <a href="?status=EnRoute" class="rnt-tab @(ViewBag.SelectedStatus == "EnRoute" ? "active" : "")">🚍 En Route</a>
            <a href="?status=Completed" class="rnt-tab @(ViewBag.SelectedStatus == "Completed" ? "active" : "")">✅ Completed</a>
        </div>

        <div class="rnt-card" style="padding: 0; overflow: hidden;">
            <div class="rnt-table-wrapper">
                <table class="rnt-table">
                    <thead>
                        <tr>
                            <th>Trip ID</th>
                            <th>Route</th>
                            <th>Vehicle</th>
                            <th>Departure</th>
                            <th>Status</th>
                            <th>Control</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var t in Model)
                        {
                            <tr>
                                <td>
                                    <span style="font-weight:bold; color:#667eea; font-size:15px;">@t.Id</span>
                                </td>
                                <td>
                                    <div style="font-weight:700;">@t.Route.Origin ➝ @t.Route.Destination</div>
                                    <div style="font-size:12px; color:#888;">RM @t.Price.ToString("N2")</div>
                                </td>
                                <td>
                                    <div style="display:flex; align-items:center; gap:5px;">
                                        <span>@t.Vehicle.VehicleNumber</span>
                                        @if (t.Route.TransportType == "Bus")
                                        {
                                            <span style="font-size:12px;">🚌</span>
                                        }
                                        else if (t.Route.TransportType == "Train")
                                        {

                                            <span style="font-size:12px;">🚄</span>
                                        }
                                    </div>
                                </td>
                                <td>
                                    <div style="font-weight:600;">@t.DepartureTime.ToString("dd MMM")</div>
                                    <div style="font-size:13px; color:#666;">@t.DepartureTime.ToString("HH:mm")</div>
                                </td>
                                <td>
                                    <span class="status-badge status-@t.Status.ToLower()">@t.Status</span>
                                </td>
                                <td>
                                    <a href="/RouteNTrip/TripStop/@t.Id" class="btn-rnt btn-rnt-primary" style="padding: 6px 15px; font-size: 13px;">Update Stops (ETA)</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>