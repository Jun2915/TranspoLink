@model TranspoLink.Models.Booking
@{
    ViewBag.Title = "Booking Confirmed | " + Model.BookingReference;
    var trip = Model.Trip;
    var seatsData = ViewBag.SeatsData as Dictionary<string, string>;
}

@section head {
    <link rel="stylesheet" href="/css/RNT.css" asp-append-version="true" />
    <style>
        .confirmation-card {
            max-width: 600px;
            margin: 50px auto;
            text-align: center;
            padding: 40px;
            background: #f9fff9;
            border: 2px solid #38a169;
        }

        .icon-success {
            font-size: 60px;
            color: #38a169;
            margin-bottom: 20px;
        }

        .details-grid {
            text-align: left;
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

            .details-grid strong {
                display: block;
                color: #333;
            }
    </style>
}

<div class="rnt-card confirmation-card">
    <div class="icon-success">✅</div>
    <h2>Booking Confirmed!</h2>
    <p>Your booking **@Model.BookingReference** has been successfully processed.</p>

    <div class="details-grid">
        <div>
            <small class="text-muted">Route</small>
            <strong>@trip.Route.Origin ➝ @trip.Route.Destination</strong>
        </div>
        <div>
            <small class="text-muted">Departure</small>
            <strong>@trip.DepartureTime.ToString("dd MMM, HH:mm")</strong>
        </div>
        <div>
            <small class="text-muted">Bus Operator</small>
            <strong>@trip.Vehicle.Driver?.Name</strong>
        </div>
        <div>
            <small class="text-muted">Total Paid</small>
            <strong>MYR @Model.TotalPrice.ToString("N2")</strong>
        </div>
    </div>

    @if (seatsData != null && seatsData.Any())
    {
        <h4 style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">Your Seats</h4>
        <ul style="list-style: none; padding: 0;">
            @foreach (var seat in seatsData)
            {
                <li style="font-size: 1.1em; margin: 5px 0;">
                    <span class="status-badge status-success" style="padding: 5px 10px;">@seat.Key</span> - @seat.Value
                </li>
            }
        </ul>
    }

    <a href="/Home/Index" class="btn-rnt btn-rnt-primary" style="margin-top: 30px;">Go to Home</a>
</div>