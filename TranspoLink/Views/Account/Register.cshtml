@model RegisterVM
@{
    ViewBag.Title += " | Register";
}

@section head {
    <link rel="stylesheet" href="/css/login.css" />
    <script src="/js/regNlog.js" defer></script>
}

@if (ViewBag.Success == true)
{
    <div class="success-overlay">
        <div class="success-card">
            <div class="success-icon">✓</div>
            <h2>Congratulations!</h2>
            <p>Account created for <b>@ViewBag.RegisteredName</b></p>
            <p>Details sent to: <b>@ViewBag.RegisteredContact</b></p>
            <br>
            <p style="font-size:14px; color:#999;">Redirecting in <span id="countdown" class="countdown-text">5</span> seconds...</p>
            <a href="/Account/Login" class="auth-submit-btn" style="display:inline-block; text-decoration:none; width:auto; padding:10px 30px;">Login Now</a>
        </div>
    </div>
    <script>
        let seconds = 5;
        setInterval(function() {
            seconds--;
            document.getElementById('countdown').innerText = seconds;
            if (seconds <= 0) {
                window.location.href = '/Account/Login';
            }
        }, 1000);
    </script>
}

<div class="auth-container">
    <div class="auth-card landscape-mode">
        <div class="auth-tabs">
            <a href="/Account/Login" class="auth-tab">Log in</a>
            <a href="/Account/Register" class="auth-tab active">Sign up</a>
        </div>

        <form method="post" asp-action="Register" asp-controller="Account" enctype="multipart/form-data" class="auth-form">
            <div asp-validation-summary="ModelOnly" class="validation-summary-errors"></div>

            <div class="register-layout">

                <div class="register-left">
                    <div class="auth-photo-upload" style="text-align:center; width: 100%;">
                        <label class="upload auth-upload">
                            <input asp-for="Photo" accept="image/jpeg,image/png" hidden>
                            <img src="/images/add_photo.png" alt="Upload Photo" style="width:150px; height:150px; object-fit:cover; border-radius:50%; border:2px dashed #ccc;">
                            <span class="auth-upload-text" style="display:block; margin-top:10px; color:#666;">Tap to upload photo</span>
                        </label>
                        <span asp-validation-for="Photo" class="field-validation-error"></span>
                    </div>
                </div>

                <div class="register-right">

                    <div class="auth-option-group">
                        <button type="button" class="auth-option active" data-register-type="email">
                            <span class="auth-option-icon">✓</span>
                            <span class="auth-option-icon-empty" style="display:none;"></span>
                            Email / User ID
                        </button>
                        <button type="button" class="auth-option" data-register-type="phone">
                            <span class="auth-option-icon" style="display:none;">✓</span>
                            <span class="auth-option-icon-empty"></span>
                            Phone
                        </button>
                    </div>

                    <div class="form-grid">

                        <div>
                            <div class="auth-input-group" id="reg-email-input-group">
                                <span class="auth-input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#666"><path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z" /></svg>
                                </span>
                                <input asp-for="Email" type="email" placeholder="Email Address">
                            </div>
                            <span asp-validation-for="Email" class="field-validation-error"></span>

                            <div class="auth-input-group" id="reg-phone-input-group" style="display: none;">
                                <span class="auth-input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#666"><path d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z" /></svg>
                                </span>
                                <input asp-for="PhoneNumber" type="text" placeholder="Phone Number">
                            </div>
                            <span asp-validation-for="PhoneNumber" class="field-validation-error"></span>

                            <div class="auth-input-group" style="margin-top: 20px;">
                                <span class="auth-input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#666"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" /></svg>
                                </span>
                                <input asp-for="Name" type="text" placeholder="Full Name">
                            </div>
                            <span asp-validation-for="Name" class="field-validation-error"></span>
                        </div>

                        <div>
                            <div class="auth-input-group">
                                <span class="auth-input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#666"><path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" /></svg>
                                </span>
                                <input asp-for="Password" type="password" placeholder="Password">
                                <button type="button" class="auth-toggle-password">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#999"><path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>
                                </button>
                            </div>
                            <span asp-validation-for="Password" class="field-validation-error"></span>

                            <div class="auth-input-group" style="margin-top: 20px;">
                                <span class="auth-input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#666"><path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" /></svg>
                                </span>
                                <input asp-for="Confirm" type="password" placeholder="Confirm Password">
                            </div>
                            <span asp-validation-for="Confirm" class="field-validation-error"></span>
                        </div>
                    </div>

                    <button type="submit" class="auth-submit-btn">Sign Up</button>

                    <div class="auth-divider"><span>or sign up with</span></div>
                    <div class="auth-social-buttons">
                        <button type="button" class="auth-social-btn facebook">Facebook</button>
                        <button type="button" class="auth-social-btn google">Google</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>