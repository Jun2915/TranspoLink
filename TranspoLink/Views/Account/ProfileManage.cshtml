@model UpdateProfileVM

@{
    ViewBag.Title += " | My Profile";
}

@section head {
    <link rel="stylesheet" href="/css/member.css" asp-append-version="true" />
    <link rel="stylesheet" href="/css/photo-tools.css" asp-append-version="true" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script src="/js/photo-tools.js" defer></script>
    <script src="/js/user.js" defer></script>
}

<div class="profile-container">

    <div class="profile-layout-wrapper">

        <div class="profile-left-col">
            <form method="post" enctype="multipart/form-data" id="profileForm">
                <div asp-validation-summary="ModelOnly" class="validation-summary-errors"></div>

                <input asp-for="Photo" type="file" accept="image/jpeg,image/png" hidden disabled>

                <div class="user-header-banner">
                    <div class="upload-trigger">
                        <div class="upload disabled-upload" id="photoContainer" title="Edit Profile to change photo">
                            <img src="@(string.IsNullOrEmpty(Model.PhotoURL) || Model.PhotoURL == "default_photo.png" ? "/images/default_photo.png" : (Model.PhotoURL.StartsWith("/images/") ? Model.PhotoURL : "/images/" + Model.PhotoURL))"
                                 class="user-avatar-large"
                                 id="profileImagePreview"
                                 onerror="this.src='/images/default_photo.png'">
                        </div>

                        <div class="user-info-text">
                            <h2>@Model.Name</h2>
                            <div class="user-id-text">
                                @(Model.Email ?? Model.Phone)
                            </div>
                        </div>
                    </div>

                    <div style="margin-left: auto;" class="header-actions">
                        <button type="button" class="btn-edit-photo" id="btnEditProfile">Edit User Profile</button>

                        <div id="editActions" style="display:none; gap: 10px; align-items:center;">
                            <button type="button" class="btn-cancel-edit" onclick="location.reload()">Cancel</button>
                            <button type="submit" class="btn-save-changes">Save Changes</button>
                        </div>
                    </div>
                </div>

                <div class="settings-section">

                    <div class="field-row">
                        <div class="field-info" style="flex: 1;">
                            <label asp-for="Name">Display Name</label>
                            <input asp-for="Name" class="field-input" placeholder="Your Name" readonly>
                            <span asp-validation-for="Name" style="color:red; font-size:12px;"></span>
                        </div>
                    </div>

                    <div class="field-row">
                        <div class="field-info" style="flex: 1;">
                            <label asp-for="Email">Email</label>
                            <input asp-for="Email" class="field-input" placeholder="Your Email" readonly>
                            <span asp-validation-for="Email" style="color:red; font-size:12px;"></span>
                        </div>
                    </div>

                    <div class="field-row">
                        <div class="field-info" style="flex: 1;">
                            <label asp-for="Phone">Phone Number</label>
                            <input asp-for="Phone" class="field-input" placeholder="Your Phone Number" readonly>
                            <span asp-validation-for="Phone" style="color:red; font-size:12px;"></span>
                        </div>
                    </div>

                </div>
            </form>
        </div>

        <div class="profile-right-col">

            <div class="settings-section">
                <h3 class="section-title">Password and Authentication</h3>

                <div class="field-row" style="border:none; padding-bottom:0;">
                    <a href="/Account/UpdatePassword" class="btn-change-pass" style="width:100%; text-align:center;">Change Password</a>
                </div>
            </div>

            <div class="settings-section" style="border-color: #faa6a8;">
                <h3 class="section-title" style="color:#ed4245;">Account Removal</h3>
                <p style="font-size:13px; color:#666; margin-bottom:15px;">
                    Disabling your account means you can recover it at any time.
                </p>

                <div style="display:flex; flex-direction:column; gap:10px;">
                    <button class="btn-danger-solid" onclick="alert('This feature is currently disabled by Admin.')" style="width:100%;">Delete Account</button>
                    <button class="btn-danger-outline" onclick="alert('This feature is currently disabled by Admin.')" style="width:100%;">Disable Account</button>
                </div>
            </div>

        </div>

    </div>
</div>